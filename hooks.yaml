# Review hook configuration for PM Agent pipeline
# Hook execution order: ai_review -> brainstorm -> human_check -> regenerate

hooks:
  after_audit:
    ai_review:
      enabled: true
      checks:
        - completeness
        - branch_awareness
        - developable_respect
    human_check:
      enabled: true
      mode: interactive
      file_path: state/audit_review.json

  after_decompose:
    ai_review:
      enabled: true
      checks:
        - dependency_order
        - scope_sanity
        - no_frozen_mutation
    brainstorm:
      enabled: true
      checks:
        - external_dependency
        - high_uncertainty
        - long_critical_path
      auto_defer_keywords:
        - "generate"
        - "生成"
        - "search"
        - "optimize"
        - "优化"
      critical_path_threshold: 3
      mode: interactive
    critical_review:
      enabled: true
      checks:
        - novelty_gap
        - redundant_with_peers
        - low_roi
      novelty_keywords:
        - "移植"
        - "port"
        - "迁移"
        - "追赶"
      low_roi_keywords:
        - "文档"
        - "documentation"
        - "自动化"
      mode: interactive
    human_check:
      enabled: true
      mode: interactive
      file_path: state/decompose_review.json
    regenerate:
      enabled: true
      checks:
        - dashboard
        - dependency_graph

  after_task_complete:
    ai_review:
      enabled: true
      checks:
        - tests_pass
        - commit_exists
        - diff_size
    brainstorm:
      enabled: true
      checks:
        - deferred_trigger_check
      mode: interactive
    human_check:
      enabled: true
      mode: interactive
    regenerate:
      enabled: true
      checks:
        - dashboard
        - dependency_graph
        - burndown

  after_milestone:
    velocity_check:
      enabled: true
      checks:
        - on_track
        - velocity_trend
    scope_review:
      enabled: true
      checks:
        - rescope_if_behind
      mode: interactive
    regenerate:
      enabled: true
      checks:
        - dashboard
        - burndown
