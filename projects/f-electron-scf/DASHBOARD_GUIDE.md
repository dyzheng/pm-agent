# f-electron-scf 可视化看板使用指南

## 🎯 快速开始

### 方法1: 本地HTTP服务器（推荐）

```bash
cd /root/pm-agent/projects/f-electron-scf
python3 -m http.server 8080
```

然后在浏览器打开: `http://localhost:8080/dashboard.html`

### 方法2: 直接打开HTML文件

```bash
cd /root/pm-agent/projects/f-electron-scf
open dashboard.html  # macOS
xdg-open dashboard.html  # Linux
```

---

## 📊 看板功能

### 1. 📋 看板视图 (Kanban)

**功能：**
- 按Phase分列显示所有任务
- 颜色编码：
  - 🟢 绿色边框 = 低风险
  - 🟡 橙色边框 = 中风险
  - 🔴 红色边框 = 高风险
- 状态图标：
  - ⏳ 待执行 (pending)
  - 🔄 进行中 (in_progress)
  - ✅ 已完成 (done)
  - ⏸️ 已延迟 (deferred)

**交互：**
- 点击任务卡片查看详细信息
- 显示任务ID、标题、层级、风险等级
- 延迟任务显示 🔔 触发条件标记

### 2. 📅 时间线视图

**功能：**
- 按Phase分组显示任务
- Phase 0: 代码集成 (4个任务)
- Phase 1: 基础收敛 (4个任务)
- Phase 2: DFT+U策略 (3个任务)
- Phase 3: 用户验证 (4个任务)
- Phase 4: 生产就绪 (4个任务)

**用途：**
- 查看项目整体进度
- 了解每个阶段的任务分布
- 识别关键路径

### 3. 🔗 依赖图视图

**功能：**
- 显示任务之间的依赖关系
- 实线箭头 = 活跃依赖
- 虚线箭头 = 挂起依赖（延迟任务）

**生成依赖图：**
```bash
cd /root/pm-agent/projects/f-electron-scf

# 生成DOT文件
python3 generate_graph.py

# 生成SVG图（需要Graphviz）
dot -Tsvg dependency_graph.dot -o dependency_graph.svg

# 生成PNG图
dot -Tpng dependency_graph.dot -o dependency_graph.png
```

### 4. ⚠️ 风险矩阵

**功能：**
- 统计不同风险等级的任务数量
- 🟢 低风险：可立即执行
- 🟡 中风险：需要验证
- 🔴 高风险：已延迟

**当前分布：**
- 低风险：15个任务
- 中风险：4个任务
- 高风险：8个任务（全部延迟）

### 5. ⏸️ 延迟任务视图

**功能：**
- 列出所有延迟任务（8个）
- 显示触发条件
- 分类：
  - Category A: 自定义赝势生成（3个）
  - Category B: NAO优化（2个）
  - Category C: ML模型（3个）

**触发条件示例：**
- `T3-3:accuracy_below_threshold` - 验证精度不足时触发
- `T1-4:failure_rate_above_20pct` - 规则失败率过高时触发
- `D-A1:completed` - 前置任务完成时触发

---

## 🎨 视觉设计

### 颜色系统

**任务状态：**
- 蓝色 (#3498db) - 待执行
- 橙色 (#f39c12) - 进行中
- 绿色 (#2ecc71) - 已完成
- 红色 (#e74c3c) - 失败
- 灰色 (#95a5a6) - 已延迟

**风险等级：**
- 绿色边框 - 低风险
- 橙色边框 - 中风险
- 红色边框 - 高风险

### 交互反馈

- 鼠标悬停：任务卡片向右移动 + 阴影
- 点击任务：弹出详细信息模态框
- 标签切换：平滑过渡动画

---

## 📱 响应式设计

看板自动适应不同屏幕尺寸：
- 桌面：每行显示多列
- 平板：每行显示2-3列
- 手机：每行显示1列

---

## 🔄 数据更新

看板从 `state/project_state.json` 读取数据。

**更新数据：**
```bash
cd /root/pm-agent/projects/f-electron-scf/state
python3 build_state.py
```

**刷新看板：**
- 浏览器中按 F5 或 Ctrl+R

---

## 📊 统计面板

顶部显示项目关键指标：
- 总任务数：27
- 活跃任务：19
- 延迟任务：8
- 预计时间：5-6月
- 节省时间：40%

---

## 🎯 使用场景

### 场景1: 项目规划
- 使用**时间线视图**查看整体进度
- 使用**风险矩阵**评估风险分布
- 使用**延迟任务视图**了解触发条件

### 场景2: 任务执行
- 使用**看板视图**选择下一个任务
- 点击任务查看详细信息
- 检查依赖关系确保可以开始

### 场景3: 进度汇报
- 截图看板视图展示进度
- 使用统计面板展示关键指标
- 使用依赖图展示任务关系

### 场景4: 风险管理
- 使用**风险矩阵**监控风险分布
- 使用**延迟任务视图**跟踪触发条件
- 定期检查是否需要提升延迟任务

---

## 🛠️ 技术栈

- **前端：** HTML5 + CSS3 + Vanilla JavaScript
- **数据：** JSON (project_state.json)
- **图形：** Graphviz (可选)
- **服务器：** Python HTTP Server

**无需安装依赖：**
- 纯静态HTML，可直接打开
- 不依赖外部库（无需npm/yarn）
- 轻量级（单文件 < 20KB）

---

## 🚀 扩展功能

### 未来可添加：

1. **实时更新**
   - WebSocket连接
   - 自动刷新数据

2. **任务编辑**
   - 在线修改任务状态
   - 拖拽调整优先级

3. **导出功能**
   - 导出为PDF报告
   - 导出为Excel表格

4. **协作功能**
   - 多人实时查看
   - 任务评论和讨论

5. **高级可视化**
   - 甘特图
   - 燃尽图
   - 累积流图

---

## 📝 示例截图说明

### 看板视图
```
┌─────────────┬─────────────┬─────────────┬─────────────┐
│  Phase 0    │  Phase 1    │  Phase 2    │  Phase 3    │
│  (4 tasks)  │  (4 tasks)  │  (3 tasks)  │  (4 tasks)  │
├─────────────┼─────────────┼─────────────┼─────────────┤
│ ⏳ T0-1     │ ⏳ T1-1     │ ⏳ T2-1     │ ⏳ T3-1     │
│ 合并代码    │ Kerker      │ 随机初始化  │ 需求调研    │
│ [infra]     │ [algorithm] │ [algorithm] │ [workflow]  │
│ 🟢 low      │ 🟢 low      │ 🟡 medium   │ 🟢 low      │
├─────────────┼─────────────┼─────────────┼─────────────┤
│ ⏳ T0-2     │ ⏳ T1-2     │ ⏳ T2-2     │ ⏳ T3-2     │
│ ...         │ ...         │ ...         │ ...         │
└─────────────┴─────────────┴─────────────┴─────────────┘
```

### 延迟任务视图
```
⏸️ 延迟任务及触发条件

┌────────────────────────────────────────────────────────┐
│ D-A1: ONCVPSP赝势生成环境搭建                          │
│ [high] [infra]                                         │
│                                                        │
│ 🔔 触发条件:                                           │
│ T3-3:accuracy_below_threshold                          │
│ (验证精度低于阈值时触发)                               │
└────────────────────────────────────────────────────────┘

┌────────────────────────────────────────────────────────┐
│ D-C1: ML训练数据收集                                   │
│ [high] [workflow]                                      │
│                                                        │
│ 🔔 触发条件:                                           │
│ T1-4:failure_rate_above_20pct                          │
│ (规则启发式失败率超过20%时触发)                        │
└────────────────────────────────────────────────────────┘
```

---

## 🎉 总结

f-electron-scf可视化看板提供了：

✅ **直观的任务管理** - 一目了然的看板视图
✅ **清晰的依赖关系** - 依赖图展示任务关联
✅ **风险可视化** - 风险矩阵快速评估
✅ **延迟任务跟踪** - 触发条件一目了然
✅ **响应式设计** - 适配各种设备
✅ **零依赖部署** - 单HTML文件即可运行

**立即体验：**
```bash
cd /root/pm-agent/projects/f-electron-scf
python3 -m http.server 8080
# 浏览器打开 http://localhost:8080/dashboard.html
```
